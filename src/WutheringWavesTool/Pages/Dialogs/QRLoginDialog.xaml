<?xml version="1.0" encoding="utf-8" ?>
<ContentDialog
    x:Class="Haiyu.Pages.Dialogs.QRLoginDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:Haiyu.Pages.Dialogs"
    xmlns:loginModel="using:Waves.Api.Models.QRLogin"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wrapper="using:Haiyu.Models.Wrapper"
    Padding="0"
    CornerRadius="5"
    mc:Ignorable="d">
    <Grid Width="400" Height="400">

        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>
        <Grid.ChildrenTransitions>
            <TransitionCollection>
                <RepositionThemeTransition />
            </TransitionCollection>
        </Grid.ChildrenTransitions>
        <Button
            HorizontalAlignment="Right"
            Command="{x:Bind ViewModel.CloseCommand}"
            CornerRadius="50"
            Style="{ThemeResource TransparentButtonStyle}"
            ToolTipService.ToolTip="关闭">
            <FontIcon FontFamily="{ThemeResource FluentIcon}" Glyph="&#xE894;" />
        </Button>
        <TextBlock
            HorizontalAlignment="Left"
            VerticalAlignment="Center"
            FontFamily="{ThemeResource DefaultFont}"
            FontSize="18"
            Text="扫码登陆" />
        <TextBox
            Grid.Row="1"
            PlaceholderText="安全验证码"
            Text="{x:Bind ViewModel.VerifyCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
            Visibility="{x:Bind ViewModel.VerifyCodeVisibility, Mode=OneWay}" />
        <Button
            Grid.Row="2"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Command="{x:Bind ViewModel.InvokeCommand}"
            Content="{x:Bind ViewModel.ScreenMessage, Mode=OneWay}" />
        <Button
            Grid.Row="4"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Command="{x:Bind ViewModel.LoginCommand}"
            Content="确认登陆"
            Visibility="{x:Bind ViewModel.LoginBthVisibility, Mode=OneWay}" />
        <Grid
            Grid.Row="3"
            Margin="0,5,0,0"
            Padding="5"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="5"
            Visibility="{x:Bind ViewModel.SessionVisibility, Mode=OneWay}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <TextBlock
                Grid.ColumnSpan="2"
                HorizontalAlignment="Center"
                FontFamily="{ThemeResource DefaultFont}"
                FontSize="17"
                Text="请选择游戏角色" />
            <ListView
                Grid.Row="1"
                Grid.ColumnSpan="2"
                Margin="0,10,0,0"
                ItemsSource="{x:Bind ViewModel.Datums, Mode=OneWay}"
                SelectedItem="{x:Bind ViewModel.SelectDatum, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="loginModel:Datum">
                        <TextBlock Text="{x:Bind GetName}" />
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
        <TextBlock
            Grid.Row="5"
            HorizontalAlignment="Center"
            FontFamily="{ThemeResource DefaultFont}"
            Text="{x:Bind ViewModel.TipMessage, Mode=OneWay}" />
    </Grid>
</ContentDialog>
