<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Haiyu.Pages.SettingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Haiyu.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:gamer="using:Waves.Api.Models.Communitys"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:item="using:Haiyu.Models"
    xmlns:local="using:Haiyu.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI.Controls"
    xmlns:wui="using:Haiyu.Controls"
    mc:Ignorable="d">
    <i:Interaction.Behaviors>
        <i:EventTriggerBehavior EventName="Loaded">
            <i:InvokeCommandAction Command="{x:Bind ViewModel.LoadedCommand}" />
        </i:EventTriggerBehavior>
    </i:Interaction.Behaviors>
    <ScrollView
        Padding="25"
        HorizontalScrollBarVisibility="Hidden"
        VerticalScrollBarVisibility="Hidden">

        <StackPanel HorizontalAlignment="Stretch">
            <StackPanel.ChildrenTransitions>
                <TransitionCollection>
                    <RepositionThemeTransition IsStaggeringEnabled="False" />
                    <EntranceThemeTransition FromVerticalOffset="-50" />
                </TransitionCollection>
            </StackPanel.ChildrenTransitions>
            <Grid Height="200">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid
                    Grid.RowSpan="3"
                    Margin="15,0,0,0"
                    Padding="10"
                    VerticalAlignment="Center"
                    Background="{ThemeResource AccentAAFillColorDisabledBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="4"
                    CornerRadius="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <controls:ImageEx
                        Width="45"
                        Height="45"
                        Margin="5"
                        Source="ms-appx:///Assets/GameIcons/global.ico" />
                    <controls:ImageEx
                        Grid.Column="1"
                        Width="45"
                        Height="45"
                        Margin="5"
                        Source="ms-appx:///Assets/GameIcons/bilibili.ico" />
                    <controls:ImageEx
                        Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Width="45"
                        Height="45"
                        Margin="5"
                        Source="ms-appx:///Assets/GameIcons/pgr.ico" />
                </Grid>
                <controls:ImageEx
                    Grid.RowSpan="3"
                    Grid.ColumnSpan="2"
                    Canvas.ZIndex="-1"
                    CornerRadius="10"
                    Source="ms-appx:///Assets/Settingbackground.png"
                    Stretch="UniformToFill" />
                <TextBlock
                    Grid.Column="1"
                    Margin="15,20,0,0"
                    VerticalAlignment="Center"
                    FontFamily="{ThemeResource DefaultFont}"
                    FontSize="25"
                    Text="Haiyu" />
                <TextBlock
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="15,0,15,0"
                    FontFamily="{ThemeResource DefaultFont}"
                    Text="Haiyu是一款针对于鸣潮、战双帕弥什两款游戏的启动器，其中包含了社区工具的一些功能，集抽卡记录、记录分析、鸣潮数据面板、游戏资源维护、轻量化等功能。"
                    TextWrapping="WrapWholeWords" />
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="1"
                    Margin="15,0,0,30"
                    Orientation="Horizontal">
                    <HyperlinkButton Content="Github" NavigateUri="https://github.com/BlameTwo/Haiyu" />
                    <HyperlinkButton Content="鸣潮官网" NavigateUri="https://mc.kurogames.com/" />
                    <HyperlinkButton Content="战双帕弥什官网" NavigateUri="https://pns.kurogames.com/" />
                    <HyperlinkButton Content="下载最新版" NavigateUri="https://github.com/BlameTwo/Haiyu/releases/latest" />
                </StackPanel>
            </Grid>
            <TextBlock
                Margin="0,15,0,0"
                FontFamily="{StaticResource DefaultFont}"
                FontSize="15"
                Text="通用" />
            <ui:SettingsCard
                Margin="0,5,0,0"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                Description="更改选项需要重启生效"
                Header="元素鼠标指针">
                <ui:SettingsCard.HeaderIcon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE7C9;" />
                </ui:SettingsCard.HeaderIcon>
                <ui:SettingsCard.Content>
                    <ComboBox ItemsSource="{x:Bind ViewModel.Cursors, Mode=OneTime}" SelectedItem="{x:Bind ViewModel.SelectCursorName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </ui:SettingsCard.Content>
            </ui:SettingsCard>
            <ui:SettingsCard
                Margin="0,5,0,0"
                Content="v1.2.8"
                Header="版本">
                <ui:SettingsCard.HeaderIcon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE794;" />
                </ui:SettingsCard.HeaderIcon>
            </ui:SettingsCard>
            <ui:SettingsCard
                Margin="0,5,0,0"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                Header="关闭按钮"
                IsClickEnabled="False">
                <ui:SettingsCard.HeaderIcon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xEB51;" />
                </ui:SettingsCard.HeaderIcon>
                <ui:SettingsCard.Content>
                    <ComboBox SelectedIndex="{x:Bind ViewModel.SelectCloseIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <ComboBoxItem Content="托盘" />
                        <ComboBoxItem Content="退出" />
                    </ComboBox>
                </ui:SettingsCard.Content>
            </ui:SettingsCard>
            <TextBlock
                Margin="0,5,0,0"
                FontFamily="{StaticResource DefaultFont}"
                FontSize="15"
                Text="库街区" />
            <ui:SettingsCard
                Margin="0,5,0,0"
                Command="{x:Bind ViewModel.CopyTokenCommand}"
                Header="复制授权码"
                IsClickEnabled="True">
                <ui:SettingsCard.ActionIcon>
                    <FontIcon
                        FontFamily="Segoe Fluent Icons"
                        FontSize="15"
                        Glyph="&#xE8C8;" />
                </ui:SettingsCard.ActionIcon>
                <ui:SettingsCard.HeaderIcon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE631;" />
                </ui:SettingsCard.HeaderIcon>
            </ui:SettingsCard>

            <ui:SettingsCard
                Margin="0,5,0,0"
                Command="{x:Bind ViewModel.CopyDidCommand}"
                Header="复制Did"
                IsClickEnabled="True">
                <ui:SettingsCard.ActionIcon>
                    <FontIcon
                        FontFamily="Segoe Fluent Icons"
                        FontSize="15"
                        Glyph="&#xE8C8;" />
                </ui:SettingsCard.ActionIcon>
                <ui:SettingsCard.HeaderIcon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE631;" />
                </ui:SettingsCard.HeaderIcon>
            </ui:SettingsCard>
            <ui:SettingsExpander
                Margin="0,5,0,0"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                ItemsSource="{x:Bind ViewModel.GamerData, Mode=OneWay}">
                <ui:SettingsExpander.HeaderIcon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xEC7A;" />
                </ui:SettingsExpander.HeaderIcon>
                <ui:SettingsExpander.Header>
                    <TextBlock VerticalAlignment="Center" Text="账号管理" />
                </ui:SettingsExpander.Header>
                <ui:SettingsExpander.ItemTemplate>
                    <DataTemplate x:DataType="gamer:GameRoilDataItem">
                        <ui:SettingsCard>
                            <ui:SettingsCard.Header>
                                <StackPanel Orientation="Horizontal">
                                    <wui:ImageEx
                                        Width="28"
                                        Height="28"
                                        CornerRadius="5"
                                        Source="{x:Bind GameHeadUrl}" />
                                    <TextBlock Margin="5,0,0,0" VerticalAlignment="Center">
                                        <Run Text="{x:Bind RoleName}" />
                                        <Run Text="--" />
                                        <Run Text="{x:Bind ServerName}" />
                                    </TextBlock>
                                </StackPanel>
                            </ui:SettingsCard.Header>
                            <Button
                                Command="{x:Bind CopyIdCommand}"
                                Style="{ThemeResource TransparentButtonStyle}"
                                ToolTipService.ToolTip="复制账号ID">
                                <FontIcon
                                    FontFamily="Segoe Fluent Icons"
                                    FontSize="15"
                                    Glyph="&#xE8C8;" />
                            </Button>
                        </ui:SettingsCard>
                    </DataTemplate>
                </ui:SettingsExpander.ItemTemplate>
            </ui:SettingsExpander>
            <ui:SettingsCard
                Margin="0,5,0,0"
                Command="{x:Bind ViewModel.OpenDesktopToolCommand}"
                Header="打开扩展卡片"
                IsClickEnabled="True" />
            <TextBlock
                Margin="0,5,0,0"
                FontFamily="{StaticResource DefaultFont}"
                FontSize="15"
                Text="存储" />
            <ui:SettingsCard
                Margin="0,5,0,0"
                Command="{x:Bind ViewModel.OpenConfigFolderCommand}"
                Header="配置文件夹"
                IsClickEnabled="True" />
        </StackPanel>
    </ScrollView>
</Page>
