<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="WutheringWavesTool.Pages.ColorFullGame"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:enum="using:WutheringWavesTool.Models.Enums"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:WutheringWavesTool.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:WutheringWavesTool.Models.ColorFullGame"
    xmlns:ui="using:WutheringWavesTool.Controls"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <ui:TitleBar
            x:Name="title"
            IsExtendsContentIntoTitleBar="True"
            TitleMode="Tall">
            <ui:TitleBar.Header>
                <MenuBar Margin="5,5,0,0">
                    <MenuBarItem Title="文件">
                        <MenuFlyoutItem Text="新文件">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="NewFolder" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem Text="打开">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="OpenFile" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem Text="保存">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Save" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem Text="另存为">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="SaveLocal" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutItem Text="退出">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Clear" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                    </MenuBarItem>
                    <MenuBarItem Title="生成棋盘">
                        <MenuFlyoutItem Command="{x:Bind ViewModel.Generator8X12Command}" Text="8X12(鸣潮)" />
                    </MenuBarItem>
                    <MenuBarItem Title="编辑">
                        <RadioMenuFlyoutItem
                            Command="{x:Bind ViewModel.SetGameModeCommand}"
                            GroupName="GameMode"
                            Text="点染模式">
                            <RadioMenuFlyoutItem.CommandParameter>
                                <enum:GameMode>DotDyeing</enum:GameMode>
                            </RadioMenuFlyoutItem.CommandParameter>
                        </RadioMenuFlyoutItem>
                        <RadioMenuFlyoutItem GroupName="GameMode" Text="染色模式">
                            <RadioMenuFlyoutItem.CommandParameter>
                                <enum:GameMode>Dyeing</enum:GameMode>
                            </RadioMenuFlyoutItem.CommandParameter>
                        </RadioMenuFlyoutItem>
                        <RadioMenuFlyoutItem GroupName="GameMode" Text="游戏模式">
                            <RadioMenuFlyoutItem.CommandParameter>
                                <enum:GameMode>Game</enum:GameMode>
                            </RadioMenuFlyoutItem.CommandParameter>
                        </RadioMenuFlyoutItem>
                    </MenuBarItem>
                </MenuBar>
            </ui:TitleBar.Header>
        </ui:TitleBar>
        <ItemsRepeater
            Grid.Row="1"
            Margin="15,10,0,0"
            HorizontalAlignment="Left"
            ItemsSource="{x:Bind ViewModel.GameGrid, Mode=OneWay}">
            <ItemsRepeater.ItemTemplate>
                <DataTemplate x:DataType="model:ColorCell">
                    <Grid
                        Width="60"
                        Height="60"
                        Background="{x:Bind CurrentColor, Mode=OneWay}"
                        CornerRadius="10">
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="12"
                            HorizontalTextAlignment="Center">
                            <Run Text="行" />
                            <Run Text="{x:Bind Row, Mode=OneWay}" />
                            <Run Text="列" />
                            <Run Text="{x:Bind Column, Mode=OneWay}" />
                        </TextBlock>
                    </Grid>
                </DataTemplate>
            </ItemsRepeater.ItemTemplate>
            <ItemsRepeater.Layout>
                <UniformGridLayout
                    MaximumRowsOrColumns="{x:Bind ViewModel.GameColumsSize, Mode=OneWay}"
                    MinColumnSpacing="5"
                    MinRowSpacing="5" />
            </ItemsRepeater.Layout>
        </ItemsRepeater>

    </Grid>
</Page>
